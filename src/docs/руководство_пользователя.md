# Руководство Пользователя "АвтомойкаПро"

## 1. Идея приложения

**"АвтомойкаПро"** — это комплексная система для полного контроля и управления автомоечным бизнесом. Главная цель — избавиться от бумажных журналов, таблиц в Excel и ручных расчетов, переведя все операции в единый цифровой интерфейс.

Приложение позволяет:
-   **Быстро регистрировать** каждую мойку, автоматически определяя тип клиента.
-   **Вести учет** корпоративных клиентов (контрагентов) и партнеров (агрегаторов) с их индивидуальными ценами.
-   **Гибко настраивать** и автоматически рассчитывать зарплату для каждого сотрудника, даже если у них разные схемы оплаты.
-   **Анализировать финансовые потоки**: отслеживать выручку, расходы и прибыльность.
-   **Автоматически формировать** закрывающие документы (счета и акты) для корпоративных клиентов.

---

## 2. Инструкция по использованию

### Главное

#### **Панель управления (`/dashboard`)**
-   **Что это?** Это главный экран вашего бизнеса, который показывает ключевые показатели в реальном времени.
-   **Что будет, если нажать?** Вы увидите:
    -   **Общую выручку**, количество моек и число клиентов.
    -   **Графики**, показывающие динамику выручки по дням и ее распределение по типам клиентов (розница, контрагенты, агрегаторы).
    -   **Список последних моек** для быстрого обзора текущей активности.
    -   **Польза:** Позволяет за 30 секунд оценить состояние дел на автомойке.

#### **Рабочая станция (`/employee/workstation`)**
-   **Что это?** Основной инструмент менеджера или администратора для регистрации новой мойки.
-   **Как пользоваться?**
    1.  **Выберите команду:** Отметьте галочками сотрудников, которые вышли на смену.
    2.  **Введите гос. номер машины:** Система попробует найти его в базах контрагентов и агрегаторов.
    3.  **Выберите тип клиента:** Если машина нашлась в базе контрагента, система выберет его автоматически. В противном случае, выберите вручную: "Наличные", "Карта", "Агрегатор".
    4.  **Выберите услуги:** На основе типа клиента вам будет предложен соответствующий прайс-лист.
    5.  **Подтвердите:** После выбора услуг и подтверждения, мойка записывается в "Журнал моек".
    -   **Польза:** Ускоряет регистрацию и исключает ошибки, так как цены подставляются автоматически.

#### **Журнал моек (`/wash-log`)**
-   **Что это?** Полный архив всех когда-либо зарегистрированных моек.
-   **Что будет, если нажать?** Вы увидите таблицу со всеми мойками. Здесь можно:
    -   **Найти** нужную мойку по номеру машины или клиенту.
    -   **Посмотреть детали** каждой операции: кто мыл, какие услуги оказаны, сколько стоило.
    -   **Редактировать** или **удалить** запись, если была допущена ошибка.
    -   **Польза:** Централизованный учет всех операций, возможность быстро находить и исправлять информацию.

---

### Управление

#### **Сотрудники (`/employees`)**
-   **Что это?** Раздел для ведения базы данных ваших работников.
-   **Что будет, если нажать?** Вы увидите список всех сотрудников. Здесь можно:
    -   **Добавить нового сотрудника**, указав его ФИО, телефон, платежные реквизиты и логин/пароль для входа.
    -   **Привязать сотрудника к схеме зарплаты**.
    -   **Редактировать** или **удалить** данные о сотруднике.
    -   Перейти на страницу **финансов сотрудника** (кнопка с иконкой кошелька).
    -   **Польза:** Вся информация о персонале в одном месте.

#### **Контрагенты (`/counter-agents`)**
-   **Что это?** Раздел для управления вашими корпоративными клиентами (юр. лицами с договором).
-   **Что будет, если нажать?** Список всех контрагентов. Здесь можно:
    -   **Создать карточку нового контрагента**: указать название, реквизиты, автопарк.
    -   **Задать индивидуальный прайс-лист**: определить специальные цены на услуги только для этого клиента.
    -   **Редактировать** информацию, например, добавить новую машину в автопарк.
    -   **Польза:** Автоматизация работы с корпоративными клиентами.

#### **Агрегаторы (`/aggregators`)**
-   **Что это?** Раздел для управления партнерами, которые поставляют вам клиентов (например, "Дорожная сеть").
-   **Что будет, если нажать?** Список всех агрегаторов. Здесь можно:
    -   **Добавить нового агрегатора**.
    -   **Создать несколько прайс-листов** (например, "Летний" и "Зимний") и выбрать один из них активным.
    -   **Редактировать** цены и список услуг.
    -   **Польза:** Гибкое управление ценами для разных партнеров и сезонов.

#### **Схемы зарплат (`/salary-schemes`)**
-   **Что это?** "Движок" финансовой мотивации персонала. Здесь вы создаете правила, по которым рассчитывается зарплата.
-   **Что будет, если нажать?** Список всех схем. Здесь можно создать схему одного из двух типов:
    1.  **"Процент от выручки"**: Например, "40% от суммы мойки". Самый простой и универсальный тип.
    2.  **"Фиксированная ставка"**: Например, "450 рублей за мойку фуры по прайсу 'Дорожной сети'". Этот тип позволяет задать конкретную ставку за конкретную услугу из конкретного прайс-листа.
    -   **Польза:** Полная автоматизация и гибкость в расчете зарплат. Система сама поймет, какую схему применить к каждой мойке.

#### **Расходы (`/expenses`)**
-   **Что это?** Журнал всех операционных расходов: аренда, закупка химии, ремонт оборудования и т.д.
-   **Что будет, если нажать?** Вы увидите общую сводку рентабельности (Выручка - Расходы) и таблицу всех расходов. Здесь можно:
    -   **Добавить новую запись о расходе**: указать сумму, дату, категорию и описание.
    -   **Редактировать** или **удалить** существующие записи.
    -   **Польза:** Позволяет видеть чистую прибыль вашего бизнеса.

#### **Прайс-лист "Наличка" (`/settings`)**
-   **Что это?** Настройки глобального прайс-листа для розничных клиентов (тех, кто платит наличными или картой).
-   **Что будет, если нажать?** Вы сможете:
    -   **Изменить цены** на основные и дополнительные услуги.
    -   **Добавить новые услуги** в розничный прайс.
    -   Указать **процент комиссии за эквайринг** (списывается при оплате картой).
    -   **Польза:** Централизованное управление ценами для самого частого типа клиентов.

---

### Финансы и отчеты

#### **Розничные транзакции (`/transactions`)**
-   **Что это?** Отфильтрованный "Журнал моек", который показывает только операции, оплаченные наличными, картой или переводом.
-   **Что будет, если нажать?** Вы увидите список всех розничных платежей.
-   **Польза:** Удобно для быстрой сверки кассы и розничной выручки.

#### **Отчет по зарплате (`/salary-report`)**
-   **Что это?** Мощный инструмент для расчета зарплаты за любой выбранный период.
-   **Что будет, если нажать?** Вы сможете:
    -   Выбрать **диапазон дат** (например, с 1 по 31 декабря).
    -   Система автоматически **рассчитает и покажет начисления** для каждого сотрудника за этот период.
    -   Вы сможете **развернуть детали** по каждому сотруднику и увидеть, за какую конкретно мойку сколько было начислено.
    -   **Польза:** Полностью автоматизирует ежемесячный или еженедельный расчет зарплат.

#### **Счета (`/invoices`)**
-   **Что это?** Генератор закрывающих документов (счетов и актов) для контрагентов.
-   **Что будет, если нажать?** Вы сможете:
    1.  Выбрать **контрагента** и **период**.
    2.  Система автоматически соберет все его мойки и сформирует документ.
    3.  Во вкладке **"Редактор"** можно будет внести правки (изменить услуги, цены).
    4.  Во вкладке **"Предпросмотр"** вы увидите готовый документ.
    5.  Нажать **"Сформировать и печатать"** и либо распечатать документ, либо сохранить его в **PDF**.
    -   **Польза:** Экономит часы на подготовке документов для бухгалтерии.

#### **AI-Аналитика (`/reports`)**
-   **Что это?** Экспериментальная функция для получения более глубоких инсайтов о бизнесе с помощью искусственного интеллекта.
-   **Что будет, если нажать?** (Временно отключено) В будущем здесь можно будет задавать вопросы в свободной форме, например: "Какой сотрудник самый рентабельный?" или "Проанализируй спад выручки в последнюю неделю", и получать развернутые ответы.
-   **Польза:** Помогает находить неочевидные закономерности и точки роста для бизнеса.
